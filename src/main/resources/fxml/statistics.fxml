<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.smartfilemanager.controller.StatisticsController">

    <!-- ìƒë‹¨ í—¤ë” -->
    <top>
        <VBox styleClass="header-section">
            <padding>
                <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
            </padding>

            <HBox alignment="CENTER_LEFT" spacing="15.0">
                <Label styleClass="header-title" text="ðŸ“Š íŒŒì¼ ì •ë¦¬ í†µê³„" />
                <Region HBox.hgrow="ALWAYS" />
                <Button styleClass="primary-button" text="ðŸ“Š ë³´ê³ ì„œ ë‚´ë³´ë‚´ê¸°" />
                <Button styleClass="secondary-button" text="ðŸ”„ ìƒˆë¡œê³ ì¹¨" />
            </HBox>

            <!-- ë¹ ë¥¸ í†µê³„ ì¹´ë“œ -->
            <HBox spacing="15.0" styleClass="stats-cards">
                <VBox.margin>
                    <Insets top="15.0" />
                </VBox.margin>

                <!-- ì´ íŒŒì¼ ì¹´ë“œ -->
                <VBox styleClass="stat-card" HBox.hgrow="ALWAYS">
                    <Label styleClass="stat-number" fx:id="totalFilesLabel" text="0" />
                    <Label styleClass="stat-label" text="ì´ íŒŒì¼ ìˆ˜" />
                </VBox>

                <!-- ì •ë¦¬ëœ íŒŒì¼ ì¹´ë“œ -->
                <VBox styleClass="stat-card" HBox.hgrow="ALWAYS">
                    <Label styleClass="stat-number" fx:id="organizedFilesLabel" text="0" />
                    <Label styleClass="stat-label" text="ì •ë¦¬ëœ íŒŒì¼" />
                </VBox>

                <!-- ì ˆì•½ëœ ê³µê°„ ì¹´ë“œ -->
                <VBox styleClass="stat-card" HBox.hgrow="ALWAYS">
                    <Label styleClass="stat-number" fx:id="spaceSavedLabel" text="0 B" />
                    <Label styleClass="stat-label" text="ì ˆì•½ëœ ê³µê°„" />
                </VBox>

                <!-- ì¤‘ë³µ íŒŒì¼ ì¹´ë“œ -->
                <VBox styleClass="stat-card" HBox.hgrow="ALWAYS">
                    <Label styleClass="stat-number" fx:id="duplicatesFoundLabel" text="0" />
                    <Label styleClass="stat-label" text="ì¤‘ë³µ íŒŒì¼ ì œê±°" />
                </VBox>
            </HBox>

            <!-- ì§„í–‰ë¥  ë°” -->
            <VBox>
                <VBox.margin>
                    <Insets top="15.0" />
                </VBox.margin>
                <Label styleClass="progress-label" text="ì „ì²´ ì •ë¦¬ ì§„í–‰ë¥ " />
                <ProgressBar fx:id="organizationProgress" prefWidth="200.0" progress="0.0" />
            </VBox>
        </VBox>
    </top>

    <!-- ë©”ì¸ ì½˜í…ì¸  - íƒ­ íŒ¨ë„ -->
    <center>
        <TabPane fx:id="statisticsTabPane" styleClass="statistics-tabs" tabClosingPolicy="UNAVAILABLE">

            <!-- ì¹´í…Œê³ ë¦¬ ë¶„ì„ íƒ­ -->
            <Tab text="ðŸ“‚ ì¹´í…Œê³ ë¦¬ ë¶„ì„">
                <ScrollPane fitToHeight="true" fitToWidth="true">
                    <VBox spacing="20.0">
                        <padding>
                            <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                        </padding>

                        <!-- ìƒë‹¨ ì œëª© -->
                        <Label styleClass="section-title" text="íŒŒì¼ ì¹´í…Œê³ ë¦¬ë³„ ë¶„í¬ ë¶„ì„" />

                        <!-- ì°¨íŠ¸ ì»¨í…Œì´ë„ˆ -->
                        <HBox spacing="20.0" VBox.vgrow="ALWAYS">

                            <!-- íŒŒì´ ì°¨íŠ¸ -->
                            <VBox styleClass="chart-container" HBox.hgrow="ALWAYS">
                                <Label styleClass="chart-title" text="ì¹´í…Œê³ ë¦¬ë³„ ë¹„ìœ¨" />
                                <PieChart fx:id="categoryPieChart" prefHeight="350.0" VBox.vgrow="ALWAYS" />
                            </VBox>

                            <!-- ë°” ì°¨íŠ¸ -->
                            <VBox styleClass="chart-container" HBox.hgrow="ALWAYS">
                                <Label styleClass="chart-title" text="ì¹´í…Œê³ ë¦¬ë³„ íŒŒì¼ ìˆ˜" />
                                <BarChart fx:id="categoryBarChart" prefHeight="350.0" VBox.vgrow="ALWAYS">
                                    <xAxis>
                                        <CategoryAxis fx:id="categoryAxis" />
                                    </xAxis>
                                    <yAxis>
                                        <NumberAxis fx:id="categoryNumberAxis" />
                                    </yAxis>
                                </BarChart>
                            </VBox>
                        </HBox>

                        <!-- ìƒì„¸ ë¶„ì„ ì •ë³´ -->
                        <VBox styleClass="analysis-details">
                            <Label styleClass="subsection-title" text="ðŸ“ˆ ë¶„ì„ ìš”ì•½" />
                            <TextArea editable="false" prefRowCount="4" styleClass="analysis-summary"
                                      text="ì¹´í…Œê³ ë¦¬ë³„ ë¶„ì„ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.&#10;ê°€ìž¥ ë§Žì€ íŒŒì¼ íƒ€ìž…, ê¶Œìž¥ì‚¬í•­ ë“±ì„ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤." />
                        </VBox>
                    </VBox>
                </ScrollPane>
            </Tab>

            <!-- ì‹œê°„ëŒ€ë³„ ë¶„ì„ íƒ­ -->
            <Tab text="â° ì‹œê°„ëŒ€ë³„ ë¶„ì„">
                <VBox spacing="20.0">
                    <padding>
                        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                    </padding>

                    <!-- ì»¨íŠ¸ë¡¤ ì˜ì—­ -->
                    <HBox alignment="CENTER_LEFT" spacing="15.0">
                        <Label styleClass="section-title" text="ì‹œê°„ëŒ€ë³„ íŒŒì¼ ì •ë¦¬ í˜„í™©" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Label text="ê¸°ê°„:" />
                        <ComboBox fx:id="timePeriodComboBox" prefWidth="120.0" />
                    </HBox>

                    <!-- íƒ€ìž„ë¼ì¸ ì°¨íŠ¸ -->
                    <VBox styleClass="chart-container" VBox.vgrow="ALWAYS">
                        <LineChart fx:id="timelineChart" prefHeight="400.0" VBox.vgrow="ALWAYS">
                            <xAxis>
                                <CategoryAxis fx:id="timelineAxis" />
                            </xAxis>
                            <yAxis>
                                <NumberAxis fx:id="timelineNumberAxis" />
                            </yAxis>
                        </LineChart>
                    </VBox>

                    <!-- ì‹œê°„ëŒ€ë³„ í†µê³„ í…Œì´ë¸” -->
                    <VBox styleClass="timeline-stats">
                        <Label styleClass="subsection-title" text="ðŸ“Š ê¸°ê°„ë³„ ìš”ì•½" />
                        <GridPane hgap="20.0" vgap="10.0">
                            <columnConstraints>
                                <ColumnConstraints halignment="LEFT" />
                                <ColumnConstraints halignment="RIGHT" />
                                <ColumnConstraints halignment="LEFT" />
                                <ColumnConstraints halignment="RIGHT" />
                            </columnConstraints>

                            <Label text="ì¼í‰ê·  ì •ë¦¬ íŒŒì¼:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                            <Label text="25ê°œ" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                            <Label text="ìµœëŒ€ ì •ë¦¬ ì¼ìž:" GridPane.columnIndex="2" GridPane.rowIndex="0" />
                            <Label text="2024-01-15 (47ê°œ)" GridPane.columnIndex="3" GridPane.rowIndex="0" />

                            <Label text="í™œë™ ì¼ìˆ˜:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                            <Label text="12ì¼" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                            <Label text="ì´ ì ˆì•½ ê³µê°„:" GridPane.columnIndex="2" GridPane.rowIndex="1" />
                            <Label text="2.3 GB" GridPane.columnIndex="3" GridPane.rowIndex="1" />
                        </GridPane>
                    </VBox>
                </VBox>
            </Tab>

            <!-- ìž‘ì—… ížˆìŠ¤í† ë¦¬ íƒ­ -->
            <Tab text="ðŸ“‹ ìž‘ì—… ížˆìŠ¤í† ë¦¬">
                <VBox spacing="15.0">
                    <padding>
                        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                    </padding>

                    <HBox alignment="CENTER_LEFT" spacing="15.0">
                        <Label styleClass="section-title" text="ìµœê·¼ ìž‘ì—… ë‚´ì—­" />
                        <Region HBox.hgrow="ALWAYS" />
                        <TextField promptText="ðŸ” ê²€ìƒ‰..." />
                        <Button text="ðŸ“… í•„í„°" />
                        <Button text="ðŸ“ ë‚´ë³´ë‚´ê¸°" />
                    </HBox>

                    <!-- ížˆìŠ¤í† ë¦¬ í…Œì´ë¸” -->
                    <TableView fx:id="historyTable" styleClass="history-table" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="dateColumn" prefWidth="150.0" text="ë‚ ì§œ/ì‹œê°„" />
                            <TableColumn fx:id="actionColumn" prefWidth="100.0" text="ìž‘ì—…" />
                            <TableColumn fx:id="fileCountColumn" prefWidth="80.0" text="íŒŒì¼ ìˆ˜" />
                            <TableColumn fx:id="sizeColumn" prefWidth="100.0" text="í¬ê¸°" />
                            <TableColumn prefWidth="200.0" text="ì„¤ëª…" />
                        </columns>
                        <placeholder>
                            <Label text="ì•„ì§ ìž‘ì—… ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤." />
                        </placeholder>
                    </TableView>
                </VBox>
            </Tab>

            <!-- ìƒì„¸ ë¶„ì„ íƒ­ -->
            <Tab text="ðŸ” ìƒì„¸ ë¶„ì„">
                <ScrollPane fitToHeight="true" fitToWidth="true">
                    <VBox spacing="20.0">
                        <padding>
                            <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                        </padding>

                        <!-- í´ë” êµ¬ì¡° ë¶„ì„ -->
                        <VBox styleClass="analysis-section">
                            <Label styleClass="section-title" text="ðŸ“ ì •ë¦¬ëœ í´ë” êµ¬ì¡°" />

                            <HBox spacing="20.0" VBox.vgrow="ALWAYS">
                                <!-- íŠ¸ë¦¬ë·° -->
                                <VBox styleClass="tree-container" HBox.hgrow="ALWAYS">
                                    <Label styleClass="subsection-title" text="í´ë” ê³„ì¸µ êµ¬ì¡°" />
                                    <TreeView fx:id="folderStructureTree" prefHeight="300.0" VBox.vgrow="ALWAYS" />
                                </VBox>

                                <!-- í´ë”ë³„ í†µê³„ -->
                                <VBox fx:id="detailAnalysisContainer" styleClass="folder-stats" HBox.hgrow="ALWAYS">
                                    <Label styleClass="subsection-title" text="í´ë”ë³„ ìƒì„¸ ì •ë³´" />

                                    <!-- ì„ íƒëœ í´ë” ì •ë³´ -->
                                    <VBox styleClass="selected-folder-info" spacing="10.0">
                                        <Label styleClass="folder-name" text="ì„ íƒëœ í´ë”: Documents" />

                                        <GridPane hgap="15.0" vgap="8.0">
                                            <columnConstraints>
                                                <ColumnConstraints halignment="LEFT" />
                                                <ColumnConstraints halignment="RIGHT" />
                                            </columnConstraints>

                                            <Label text="íŒŒì¼ ìˆ˜:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                                            <Label text="127ê°œ" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                                            <Label text="ì´ í¬ê¸°:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                                            <Label text="845.2 MB" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                                            <Label text="í‰ê·  íŒŒì¼ í¬ê¸°:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                                            <Label text="6.7 MB" GridPane.columnIndex="1" GridPane.rowIndex="2" />

                                            <Label text="ìµœê·¼ ì¶”ê°€:" GridPane.columnIndex="0" GridPane.rowIndex="3" />
                                            <Label text="2024-01-15" GridPane.columnIndex="1" GridPane.rowIndex="3" />
                                        </GridPane>

                                        <!-- íŒŒì¼ íƒ€ìž… ë¶„í¬ -->
                                        <Label styleClass="subsection-title" text="íŒŒì¼ íƒ€ìž… ë¶„í¬" />
                                        <VBox spacing="5.0">
                                            <HBox alignment="CENTER_LEFT" spacing="10.0">
                                                <Label text="PDF:" />
                                                <ProgressBar prefWidth="150.0" progress="0.45" />
                                                <Label text="45%" />
                                            </HBox>
                                            <HBox alignment="CENTER_LEFT" spacing="10.0">
                                                <Label text="DOCX:" />
                                                <ProgressBar prefWidth="150.0" progress="0.3" />
                                                <Label text="30%" />
                                            </HBox>
                                            <HBox alignment="CENTER_LEFT" spacing="10.0">
                                                <Label text="TXT:" />
                                                <ProgressBar prefWidth="150.0" progress="0.15" />
                                                <Label text="15%" />
                                            </HBox>
                                            <HBox alignment="CENTER_LEFT" spacing="10.0">
                                                <Label text="ê¸°íƒ€:" />
                                                <ProgressBar prefWidth="150.0" progress="0.1" />
                                                <Label text="10%" />
                                            </HBox>
                                        </VBox>
                                    </VBox>
                                </VBox>
                            </HBox>
                        </VBox>

                        <!-- íš¨ìœ¨ì„± ë¶„ì„ -->
                        <VBox styleClass="efficiency-analysis">
                            <Label styleClass="section-title" text="ðŸ“ˆ ì •ë¦¬ íš¨ìœ¨ì„± ë¶„ì„" />

                            <GridPane hgap="30.0" vgap="15.0">
                                <columnConstraints>
                                    <ColumnConstraints halignment="LEFT" hgrow="ALWAYS" />
                                    <ColumnConstraints halignment="LEFT" hgrow="ALWAYS" />
                                </columnConstraints>

                                <!-- ì™¼ìª½ ì—´ -->
                                <VBox spacing="10.0" GridPane.columnIndex="0" GridPane.rowIndex="0">
                                    <Label styleClass="subsection-title" text="ðŸŽ¯ ì •ë¦¬ ì„±ê³¼" />

                                    <HBox alignment="CENTER_LEFT" spacing="15.0">
                                        <Label text="ì •ë¦¬ ì •í™•ë„:" />
                                        <ProgressBar prefWidth="120.0" progress="0.92" />
                                        <Label text="92%" />
                                    </HBox>

                                    <HBox alignment="CENTER_LEFT" spacing="15.0">
                                        <Label text="ìžë™ ë¶„ë¥˜ìœ¨:" />
                                        <ProgressBar prefWidth="120.0" progress="0.87" />
                                        <Label text="87%" />
                                    </HBox>

                                    <HBox alignment="CENTER_LEFT" spacing="15.0">
                                        <Label text="ì¤‘ë³µ ì œê±°ìœ¨:" />
                                        <ProgressBar prefWidth="120.0" progress="0.78" />
                                        <Label text="78%" />
                                    </HBox>
                                </VBox>

                                <!-- ì˜¤ë¥¸ìª½ ì—´ -->
                                <VBox spacing="10.0" GridPane.columnIndex="1" GridPane.rowIndex="0">
                                    <Label styleClass="subsection-title" text="ðŸ’¡ ê°œì„  ì œì•ˆ" />

                                    <VBox spacing="5.0">
                                        <Label styleClass="suggestion-item" text="â€¢ ìŠ¤í¬ë¦°ìƒ· íŒŒì¼ë“¤ì„ ì›”ë³„ë¡œ ì„¸ë¶„í™”í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤" />
                                        <Label styleClass="suggestion-item" text="â€¢ Downloads í´ë”ì— ìž„ì‹œ íŒŒì¼ì´ ë§Žì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤" />
                                        <Label styleClass="suggestion-item" text="â€¢ ì¤‘ë³µëœ ì´ë¯¸ì§€ íŒŒì¼ 15ê°œë¥¼ ì •ë¦¬í•˜ë©´ 125MB ì ˆì•½ ê°€ëŠ¥í•©ë‹ˆë‹¤" />
                                        <Label styleClass="suggestion-item" text="â€¢ AI ë¶„ì„ì„ í™œì„±í™”í•˜ë©´ ë¶„ë¥˜ ì •í™•ë„ê°€ í–¥ìƒë©ë‹ˆë‹¤" />
                                    </VBox>
                                </VBox>
                            </GridPane>
                        </VBox>

                        <!-- ì‹œìŠ¤í…œ ì •ë³´ -->
                        <VBox styleClass="system-info">
                            <Label styleClass="section-title" text="ðŸ”§ ì‹œìŠ¤í…œ ì •ë³´" />

                            <GridPane hgap="20.0" vgap="8.0">
                                <columnConstraints>
                                    <ColumnConstraints halignment="LEFT" />
                                    <ColumnConstraints halignment="LEFT" />
                                    <ColumnConstraints halignment="LEFT" />
                                    <ColumnConstraints halignment="LEFT" />
                                </columnConstraints>

                                <Label text="ë°ì´í„°ë² ì´ìŠ¤ í¬ê¸°:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                                <Label text="2.4 MB" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                                <Label text="ìºì‹œ í¬ê¸°:" GridPane.columnIndex="2" GridPane.rowIndex="0" />
                                <Label text="156 KB" GridPane.columnIndex="3" GridPane.rowIndex="0" />

                                <Label text="ì´ ì²˜ë¦¬ ì‹œê°„:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                                <Label text="3ë¶„ 42ì´ˆ" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                                <Label text="í‰ê·  ì²˜ë¦¬ ì†ë„:" GridPane.columnIndex="2" GridPane.rowIndex="1" />
                                <Label text="45íŒŒì¼/ë¶„" GridPane.columnIndex="3" GridPane.rowIndex="1" />

                                <Label text="ë§ˆì§€ë§‰ ë°±ì—…:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                                <Label text="2024-01-15 14:30" GridPane.columnIndex="1" GridPane.rowIndex="2" />

                                <Label text="ì„¤ì • íŒŒì¼ ìœ„ì¹˜:" GridPane.columnIndex="2" GridPane.rowIndex="2" />
                                <Label text="~/.smartfilemanager/" GridPane.columnIndex="3" GridPane.rowIndex="2" />
                            </GridPane>
                        </VBox>
                    </VBox>
                </ScrollPane>
            </Tab>

        </TabPane>
    </center>

    <!-- í•˜ë‹¨ ì•¡ì…˜ ë°” -->
    <bottom>
        <HBox alignment="CENTER_RIGHT" spacing="10.0" styleClass="action-bar">
            <padding>
                <Insets bottom="15.0" left="20.0" right="20.0" top="15.0" />
            </padding>

            <Button styleClass="secondary-button" text="ðŸ“Š CSV ë‚´ë³´ë‚´ê¸°" />
            <Button styleClass="secondary-button" text="ðŸ“ˆ PDF ë³´ê³ ì„œ" />
            <Button styleClass="primary-button" text="ðŸ”„ ì „ì²´ ìƒˆë¡œê³ ì¹¨" />
        </HBox>
    </bottom>

</BorderPane>