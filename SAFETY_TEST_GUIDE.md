# 🔒 Smart File Manager 안전성 테스트 가이드

이 가이드는 Smart File Manager의 안전성 기능들을 직접 테스트할 수 있는 방법을 제시합니다.

## 📋 테스트 체크리스트

### ✅ 기본 준비사항
- [ ] 애플리케이션이 정상 실행되는지 확인
- [ ] 테스트용 폴더 및 파일 준비
- [ ] 중요한 데이터는 별도 백업 완료

---

## 🛡️ 1. 시스템 파일 보호 테스트

### 목적: 시스템 중요 파일이 실수로 이동/삭제되지 않는지 확인

### 테스트 방법:

#### 1.1 Windows 시스템 파일 보호 테스트
```
테스트 대상: C:\Windows\System32 폴더
```

**단계:**
1. Smart File Manager 실행
2. 스캔 폴더를 `C:\Windows\System32`로 설정 시도
3. **예상 결과**: 보호된 디렉토리로 인해 스캔이 거부되거나 시스템 파일들이 제외됨

#### 1.2 실행 파일 보호 테스트
```
테스트 파일: 임의의 .exe, .dll 파일
```

**단계:**
1. 테스트 폴더에 실행 파일 복사 (예: notepad.exe 복사본)
2. 해당 폴더를 스캔
3. 파일 정리 실행
4. **예상 결과**: .exe, .dll 파일들이 자동으로 제외되고 로그에 보호 메시지 출력

#### 1.3 사용 중인 파일 보호 테스트
```
테스트 파일: 현재 열려있는 문서나 실행 중인 프로그램 파일
```

**단계:**
1. 메모장으로 텍스트 파일을 열어둠
2. 해당 파일이 있는 폴더를 스캔
3. 파일 정리 실행
4. **예상 결과**: 사용 중인 파일은 "파일이 사용 중" 메시지와 함께 제외됨

---

## 💾 2. 백업 및 롤백 테스트

### 목적: 파일 이동 실패 시 백업으로부터 복원되는지 확인

### 테스트 방법:

#### 2.1 백업 생성 테스트
```
테스트 파일: 100MB 이상의 대용량 파일
```

**준비:**
```bash
# 100MB 테스트 파일 생성 (Windows 명령 프롬프트)
fsutil file createnew test_large_file.txt 104857600
```

**단계:**
1. 생성된 대용량 파일을 포함한 폴더 스캔
2. 파일 정리 실행
3. `C:\Users\[사용자명]\.smartfilemanager\backups` 폴더 확인
4. **예상 결과**: 백업 파일이 타임스탬프와 함께 생성됨

#### 2.2 롤백 테스트 (고급)
```
⚠️ 주의: 중요하지 않은 테스트 파일로만 진행하세요
```

**단계:**
1. 테스트 파일의 권한을 읽기 전용으로 변경
2. 해당 파일을 대상 폴더로 이동 시도
3. **예상 결과**: 이동 실패 시 백업으로부터 원본 위치로 자동 복원

---

## 🧠 3. 메모리 관리 테스트

### 목적: 메모리 부족 상황에서 안전하게 동작하는지 확인

### 테스트 방법:

#### 3.1 메모리 모니터링 테스트
**단계:**
1. 애플리케이션 실행
2. 콘솔 로그에서 메모리 상태 메시지 확인
3. 대용량 폴더 스캔 실행
4. **예상 결과**: 메모리 사용률이 높아지면 자동으로 정리 메시지 출력

#### 3.2 대용량 스캔 테스트
```
테스트 대상: 10,000개 이상의 파일이 있는 폴더
```

**준비:**
```bash
# 많은 수의 테스트 파일 생성 (PowerShell)
1..10000 | ForEach-Object { New-Item -ItemType File -Name "test_file_$_.txt" -Path "test_folder" }
```

**단계:**
1. 생성된 폴더 스캔
2. 메모리 사용량 모니터링
3. **예상 결과**: 메모리 부족 시 작업 중단 또는 배치 처리로 안전하게 진행

---

## 💿 4. 데이터베이스 안전성 테스트

### 목적: 데이터베이스 작업 중 오류 발생 시 데이터 무결성 보장 확인

### 테스트 방법:

#### 4.1 트랜잭션 테스트
**단계:**
1. 파일 정리 작업 시작
2. 작업 진행 중 애플리케이션 강제 종료 (Ctrl+C 또는 작업 관리자)
3. 애플리케이션 재시작
4. 데이터베이스 확인 (`C:\Users\[사용자명]\.smartfilemanager\smartfilemanager.db`)
5. **예상 결과**: 부분적으로 완료된 작업이 롤백되어 데이터 일관성 유지

#### 4.2 연결 복구 테스트
**단계:**
1. 데이터베이스 파일을 일시적으로 읽기 전용으로 변경
2. 파일 정리 작업 시도
3. 읽기 전용 해제 후 재시도
4. **예상 결과**: 연결 오류 메시지 출력 후 정상 복구

---

## 🚨 5. 극한 상황 테스트

### 목적: 예상치 못한 상황에서도 안전하게 동작하는지 확인

### 테스트 방법:

#### 5.1 디스크 공간 부족 테스트
**준비:**
```
- 작은 용량의 USB 드라이브 또는 가상 드라이브 사용
- 거의 가득 찬 상태로 만들기
```

**단계:**
1. 공간이 부족한 드라이브를 대상 폴더로 설정
2. 대용량 파일 이동 시도
3. **예상 결과**: 공간 부족 오류 메시지와 함께 안전하게 작업 중단

#### 5.2 네트워크 드라이브 테스트
**단계:**
1. 네트워크 드라이브 (또는 USB) 연결
2. 해당 드라이브의 파일 스캔 시작
3. 스캔 진행 중 드라이브 연결 해제
4. **예상 결과**: 연결 오류 감지 후 안전하게 작업 중단

---

## 📊 6. 테스트 결과 확인 방법

### 로그 확인
```
위치: 콘솔 출력 또는 로그 파일
찾아볼 키워드:
- [SAFETY] - 안전성 관련 메시지
- [BACKUP] - 백업 관련 메시지  
- [MEMORY] - 메모리 관리 메시지
- [ERROR] - 오류 메시지
- [ROLLBACK] - 롤백 메시지
```

### 백업 폴더 확인
```
위치: C:\Users\[사용자명]\.smartfilemanager\backups\
확인사항: 백업 파일들이 타임스탬프와 함께 올바르게 생성되었는지
```

### 데이터베이스 확인
```
위치: C:\Users\[사용자명]\.smartfilemanager\smartfilemanager.db
도구: DB Browser for SQLite 등의 도구로 데이터 무결성 확인
```

---

## ⚠️ 주의사항

### 🔴 절대 하지 말아야 할 것:
- 실제 중요한 시스템 폴더나 파일로 테스트
- 백업 없이 중요한 데이터로 테스트
- 운영 중인 시스템에서 극한 테스트

### 🟡 권장사항:
- 가상 머신이나 테스트 전용 컴퓨터 사용
- 테스트 전 항상 중요 데이터 백업
- 단계별로 차근차근 진행
- 각 테스트 후 결과 기록

### ✅ 테스트 성공 기준:
- 시스템 파일이 보호됨
- 백업이 자동으로 생성됨
- 오류 발생 시 안전하게 복구됨
- 메모리 부족 시 적절히 대응됨
- 데이터 무결성이 유지됨

---

## 📞 문제 발생 시

만약 테스트 중 예상과 다른 결과가 나오거나 문제가 발생하면:

1. **즉시 테스트 중단**
2. **로그 메시지 확인 및 저장**
3. **백업 폴더에서 복원 가능한지 확인**
4. **문제 상황 상세히 기록**

이러한 테스트를 통해 Smart File Manager의 안전성을 직접 확인하고, 실제 사용 시 더욱 안심할 수 있습니다.